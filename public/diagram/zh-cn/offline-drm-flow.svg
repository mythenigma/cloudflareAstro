<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 1000 750" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style type="text/css">
      @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;600;700');
      text { font-family: 'Noto Sans SC', sans-serif; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
      <polygon points="0 0, 10 5, 0 10" fill="#64748b"/>
    </marker>
  </defs>
  
  <rect width="1000" height="750" fill="#f8fafc"/>
  <text x="500" y="35" font-size="24" font-weight="bold" text-anchor="middle" fill="#1e293b">离线PDF DRM模式完整流程</text>
  
  <rect x="30" y="85" width="460" height="300" fill="#eff6ff" stroke="#0284c7" stroke-width="2" rx="8"/>
  <text x="260" y="115" font-size="14" font-weight="bold" fill="#0c4a6e">阶段1：上传和权限配置</text>
  
  <rect x="50" y="135" width="420" height="70" fill="white" stroke="#0284c7" stroke-width="2" rx="4"/>
  <text x="260" y="160" font-size="12" font-weight="bold" text-anchor="middle" fill="#0c4a6e">1 用户上传PDF文件</text>
  <text x="260" y="180" font-size="10" text-anchor="middle" fill="#475569">选择需要保护的PDF文件</text>
  
  <path d="M 260 205 L 260 245" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <rect x="50" y="245" width="420" height="120" fill="white" stroke="#0284c7" stroke-width="2" rx="4"/>
  <text x="260" y="270" font-size="12" font-weight="bold" text-anchor="middle" fill="#0c4a6e">2 配置离线DRM权限</text>
  <text x="260" y="290" font-size="10" text-anchor="middle" fill="#475569">设置访问次数限制</text>
  <text x="260" y="305" font-size="10" text-anchor="middle" fill="#475569">设置有效期</text>
  <text x="260" y="320" font-size="10" text-anchor="middle" fill="#475569">配置禁止下载打印复制</text>
  
  <rect x="510" y="85" width="460" height="300" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="8"/>
  <text x="740" y="115" font-size="14" font-weight="bold" fill="#92400e">阶段2：生成离线包</text>
  
  <rect x="530" y="135" width="420" height="70" fill="white" stroke="#f59e0b" stroke-width="2" rx="4"/>
  <text x="740" y="160" font-size="12" font-weight="bold" text-anchor="middle" fill="#92400e">1 服务器端加密处理</text>
  <text x="740" y="180" font-size="10" text-anchor="middle" fill="#475569">使用AES-256加密算法</text>
  
  <path d="M 740 205 L 740 245" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <rect x="530" y="245" width="420" height="120" fill="white" stroke="#f59e0b" stroke-width="2" rx="4"/>
  <text x="740" y="270" font-size="12" font-weight="bold" text-anchor="middle" fill="#92400e">2 生成离线HTML包</text>
  <text x="740" y="290" font-size="10" text-anchor="middle" fill="#475569">创建HTML5容器index.html</text>
  <text x="740" y="305" font-size="10" text-anchor="middle" fill="#475569">嵌入DRM脚本和权限校验</text>
  <text x="740" y="320" font-size="10" text-anchor="middle" fill="#475569">打包成ZIP文件</text>
  
  <rect x="30" y="405" width="940" height="120" fill="#f0fdf4" stroke="#22c55e" stroke-width="2" rx="8"/>
  <text x="500" y="435" font-size="14" font-weight="bold" fill="#166534">阶段3：分发离线包</text>
  
  <rect x="60" y="455" width="180" height="60" fill="white" stroke="#22c55e" stroke-width="2" rx="4"/>
  <text x="150" y="475" font-size="11" font-weight="bold" text-anchor="middle" fill="#166534">方式1：直接发送</text>
  <text x="150" y="505" font-size="9" text-anchor="middle" fill="#475569">邮件或网盘分享</text>
  
  <path d="M 240 485 L 280 485" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <rect x="280" y="455" width="180" height="60" fill="white" stroke="#22c55e" stroke-width="2" rx="4"/>
  <text x="370" y="475" font-size="11" font-weight="bold" text-anchor="middle" fill="#166534">方式2：上传服务器</text>
  <text x="370" y="505" font-size="9" text-anchor="middle" fill="#475569">服务器或云存储</text>
  
  <path d="M 460" y="485 L 500 L 485" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <rect x="500" y="455" width="180" height="60" fill="white" stroke="#22c55e" stroke-width="2" rx="4"/>
  <text x="590" y="475" font-size="11" font-weight="bold" text-anchor="middle" fill="#166534">方式3：二维码分享</text>
  <text x="590" y="505" font-size="9" text-anchor="middle" fill="#475569">扫码下载离线包</text>
  
  <path d="M 680 485 L 720 485" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <rect x="720" y="455" width="150" height="60" fill="white" stroke="#22c55e" stroke-width="2" rx="4"/>
  <text x="795" y="485" font-size="11" font-weight="bold" text-anchor="middle" fill="#166534">接收方获取</text>
  
  <rect x="30" y="545" width="940" height="180" fill="#fce7f3" stroke="#ec4899" stroke-width="2" rx="8"/>
  <text x="500" y="575" font-size="14" font-weight="bold" fill="#831843">阶段4：本地打开和使用</text>
  
  <circle cx="100" cy="635" r="25" fill="#ec4899"/>
  <text x="100" y="642" font-size="12" text-anchor="middle" fill="white">1</text>
  <text x="100" y="670" font-size="10" text-anchor="middle" fill="#1e293b">双击index.html</text>
  
  <path d="M 125 635 L 165 635" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <circle cx="205" cy="635" r="25" fill="#ec4899"/>
  <text x="205" y="642" font-size="12" text-anchor="middle" fill="white">2</text>
  <text x="205" y="670" font-size="10" text-anchor="middle" fill="#1e293b">浏览器打开</text>
  
  <path d="M 230 635 L 270 635" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <circle cx="310" cy="635" r="25" fill="#ec4899"/>
  <text x="310" y="642" font-size="12" text-anchor="middle" fill="white">3</text>
  <text x="310" y="670" font-size="10" text-anchor="middle" fill="#1e293b">DRM验证</text>
  
  <path d="M 335 635 L 375 635" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <circle cx="415" cy="635" r="25" fill="#ec4899"/>
  <text x="415" y="642" font-size="12" text-anchor="middle" fill="white">4</text>
  <text x="415" y="670" font-size="10" text-anchor="middle" fill="#1e293b">解密渲染</text>
  
  <path d="M 440 635 L 480 635" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <circle cx="520" cy="635" r="25" fill="#ec4899"/>
  <text x="520" y="642" font-size="12" text-anchor="middle" fill="white">5</text>
  <text x="520" y="670" font-size="10" text-anchor="middle" fill="#1e293b">在线阅读</text>
  
  <rect x="50" y="700" width="880" height="35" fill="white" stroke="#ec4899" stroke-width="1" rx="4"/>
  <text x="500" y="723" font-size="11" text-anchor="middle" fill="#831843">实时权限检查：访问次数 | 有效期 | 禁止下载打印 | 行为记录</text>

  <g id="platform-watermark">
    <rect x="60%" y="92%" width="38%" height="6%" rx="6" fill="#ffffff" opacity="0.75"/>
    <text x="97%" y="96%" text-anchor="end" dominant-baseline="middle"
          font-size="12" font-family="Arial, sans-serif" fill="#0f172a" opacity="0.55">MaiPDF • Offline</text>
  </g>
</svg>
