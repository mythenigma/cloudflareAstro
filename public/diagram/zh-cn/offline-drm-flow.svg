<svg viewBox="0 0 1000 750" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;600;700&display=swap');
      text { font-family: 'Noto Sans SC', sans-serif; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
      <polygon points="0 0, 10 5, 0 10" fill="#64748b"/>
    </marker>
  </defs>
  <!-- 背景 -->
  <rect width="1000" height="750" fill="#f8fafc"/>
  
  <!-- 标题 -->
  <text x="500" y="35" font-size="26" font-weight="bold" text-anchor="middle" fill="#1e293b">
    离线 PDF DRM 模式完整流程
  </text>
  
  <text x="500" y="60" font-size="12" fill="#64748b" text-anchor="middle">
    无需网络连接，在离线环境中实现 PDF 文件的完整权限控制
  </text>
  
  <!-- 阶段1：上传和配置 -->
  <g>
    <rect x="30" y="85" width="460" height="300" fill="#eff6ff" stroke="#0284c7" stroke-width="2" rx="8"/>
    <text x="260" y="115" font-size="14" font-weight="bold" fill="#0c4a6e">📤 阶段1：上传和权限配置</text>
    
    <!-- 步骤1 -->
    <rect x="50" y="135" width="420" height="70" fill="white" stroke="#0284c7" stroke-width="2" rx="4"/>
    <text x="260" y="160" font-size="13" font-weight="bold" text-anchor="middle" fill="#0c4a6e">1️⃣ 用户上传 PDF 文件</text>
    <text x="260" y="185" font-size="11" text-anchor="middle" fill="#475569">选择需要保护的 PDF 文件 (最大 100MB)</text>
    <text x="260" y="200" font-size="11" text-anchor="middle" fill="#475569">系统检验文件格式和完整性</text>
    
    <!-- 箭头 -->
    <path d="M 260 205 L 260 245" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- 步骤2 -->
    <rect x="50" y="245" width="420" height="120" fill="white" stroke="#0284c7" stroke-width="2" rx="4"/>
    <text x="260" y="270" font-size="13" font-weight="bold" text-anchor="middle" fill="#0c4a6e">2️⃣ 配置离线 DRM 权限</text>
    <text x="260" y="295" font-size="11" text-anchor="middle" fill="#475569">设置访问次数限制 (如: 3次、10次、无限)</text>
    <text x="260" y="312" font-size="11" text-anchor="middle" fill="#475569">设置有效期 (如: 7天、30天、1年)</text>
    <text x="260" y="329" font-size="11" text-anchor="middle" fill="#475569">配置功能限制：禁止下载、打印、复制</text>
    <text x="260" y="346" font-size="11" text-anchor="middle" fill="#475569">选择是否添加动态水印</text>
  </g>
  
  <!-- 阶段2：生成和加密 -->
  <g>
    <rect x="510" y="85" width="460" height="300" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="8"/>
    <text x="740" y="115" font-size="14" font-weight="bold" fill="#92400e">🔐 阶段2：生成离线包</text>
    
    <!-- 步骤1 -->
    <rect x="530" y="135" width="420" height="70" fill="white" stroke="#f59e0b" stroke-width="2" rx="4"/>
    <text x="740" y="160" font-size="13" font-weight="bold" text-anchor="middle" fill="#92400e">1️⃣ 服务器端加密处理</text>
    <text x="740" y="185" font-size="11" text-anchor="middle" fill="#475569">使用 AES-256 加密算法对 PDF 内容加密</text>
    <text x="740" y="200" font-size="11" text-anchor="middle" fill="#475569">生成加密的 PDF 资源文件</text>
    
    <!-- 箭头 -->
    <path d="M 740 205 L 740 245" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- 步骤2 -->
    <rect x="530" y="245" width="420" height="120" fill="white" stroke="#f59e0b" stroke-width="2" rx="4"/>
    <text x="740" y="270" font-size="13" font-weight="bold" text-anchor="middle" fill="#92400e">2️⃣ 生成离线 HTML 包</text>
    <text x="740" y="295" font-size="11" text-anchor="middle" fill="#475569">创建 HTML5 容器：index.html + assets/</text>
    <text x="740" y="312" font-size="11" text-anchor="middle" fill="#475569">嵌入 DRM 脚本和权限校验逻辑</text>
    <text x="740" y="329" font-size="11" text-anchor="middle" fill="#475569">内置访问计数器、时间追踪器、日志记录</text>
    <text x="740" y="346" font-size="11" text-anchor="middle" fill="#475569">打包成可压缩的 ZIP 文件</text>
  </g>
  
  <!-- 阶段3：分发 -->
  <g>
    <rect x="30" y="405" width="940" height="120" fill="#f0fdf4" stroke="#22c55e" stroke-width="2" rx="8"/>
    <text x="500" y="435" font-size="14" font-weight="bold" fill="#166534">📦 阶段3：分发离线包</text>
    
    <!-- 分发方式1 -->
    <rect x="60" y="455" width="200" height="60" fill="white" stroke="#22c55e" stroke-width="2" rx="4"/>
    <text x="160" y="475" font-size="12" font-weight="bold" text-anchor="middle" fill="#166534">方式1：直接发送</text>
    <text x="160" y="495" font-size="10" text-anchor="middle" fill="#475569">将 ZIP 文件直接</text>
    <text x="160" y="508" font-size="10" text-anchor="middle" fill="#475569">通过邮件或网盘分享</text>
    
    <!-- 箭头 -->
    <path d="M 260 485 L 310 485" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- 分发方式2 -->
    <rect x="310" y="455" width="200" height="60" fill="white" stroke="#22c55e" stroke-width="2" rx="4"/>
    <text x="410" y="475" font-size="12" font-weight="bold" text-anchor="middle" fill="#166534">方式2：上传服务器</text>
    <text x="410" y="495" font-size="10" text-anchor="middle" fill="#475569">上传到自己的服务器</text>
    <text x="410" y="508" font-size="10" text-anchor="middle" fill="#475569">或云存储，分享链接</text>
    
    <!-- 箭头 -->
    <path d="M 510 485 L 560 485" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- 分发方式3 -->
    <rect x="560" y="455" width="200" height="60" fill="white" stroke="#22c55e" stroke-width="2" rx="4"/>
    <text x="660" y="475" font-size="12" font-weight="bold" text-anchor="middle" fill="#166534">方式3：二维码分享</text>
    <text x="660" y="495" font-size="10" text-anchor="middle" fill="#475569">生成二维码链接</text>
    <text x="660" y="508" font-size="10" text-anchor="middle" fill="#475569">扫码下载离线包</text>
    
    <!-- 箭头 -->
    <path d="M 760 485 L 810 485" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- 分发方式4 -->
    <rect x="810" y="455" width="150" height="60" fill="white" stroke="#22c55e" stroke-width="2" rx="4"/>
    <text x="885" y="475" font-size="12" font-weight="bold" text-anchor="middle" fill="#166534">接收方获取</text>
    <text x="885" y="495" font-size="10" text-anchor="middle" fill="#475569">获得离线包</text>
    <text x="885" y="508" font-size="10" text-anchor="middle" fill="#475569">准备打开</text>
  </g>
  
  <!-- 阶段4：本地打开和使用 -->
  <g>
    <rect x="30" y="545" width="940" height="180" fill="#fce7f3" stroke="#ec4899" stroke-width="2" rx="8"/>
    <text x="500" y="575" font-size="14" font-weight="bold" fill="#831843">👁️ 阶段4：本地打开和使用</text>
    
    <!-- 打开步骤 -->
    <g>
      <circle cx="100" cy="640" r="25" fill="#ec4899"/>
      <text x="100" y="647" font-size="16" text-anchor="middle" fill="white">1️⃣</text>
      <text x="100" y="675" font-size="11" text-anchor="middle" fill="#1e293b">双击 index.html</text>
      
      <!-- 箭头 -->
      <path d="M 125 640 L 175 640" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      
      <circle cx="220" cy="640" r="25" fill="#ec4899"/>
      <text x="220" y="647" font-size="16" text-anchor="middle" fill="white">2️⃣</text>
      <text x="220" y="675" font-size="11" text-anchor="middle" fill="#1e293b">浏览器打开</text>
      
      <!-- 箭头 -->
      <path d="M 245 640 L 295 640" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      
      <circle cx="340" cy="640" r="25" fill="#ec4899"/>
      <text x="340" y="647" font-size="16" text-anchor="middle" fill="white">3️⃣</text>
      <text x="340" y="675" font-size="11" text-anchor="middle" fill="#1e293b">DRM 脚本验证</text>
      
      <!-- 箭头 -->
      <path d="M 365 640 L 415 640" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      
      <circle cx="460" cy="640" r="25" fill="#ec4899"/>
      <text x="460" y="647" font-size="16" text-anchor="middle" fill="white">4️⃣</text>
      <text x="460" y="675" font-size="11" text-anchor="middle" fill="#1e293b">解密并渲染</text>
      
      <!-- 箭头 -->
      <path d="M 485 640 L 535 640" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      
      <circle cx="580" cy="640" r="25" fill="#ec4899"/>
      <text x="580" y="647" font-size="16" text-anchor="middle" fill="white">5️⃣</text>
      <text x="580" y="675" font-size="11" text-anchor="middle" fill="#1e293b">在线阅读 PDF</text>
    </g>
    
    <!-- 权限检查 -->
    <g>
      <rect x="50" y="705" width="880" height="60" fill="white" stroke="#ec4899" stroke-width="1" rx="4"/>
      <text x="500" y="725" font-size="12" font-weight="bold" text-anchor="middle" fill="#831843">🔒 实时权限检查</text>
      <text x="500" y="745" font-size="11" text-anchor="middle" fill="#475569">检查访问次数是否超限 | 检查有效期是否过期 | 禁止下载打印复制快捷键 | 记录阅读行为</text>
      <text x="500" y="760" font-size="11" text-anchor="middle" fill="#475569">若设备联网，后台回传使用日志；超过限制立即锁定文档</text>
    </g>
  </g>
  
  <!-- 核心特性 -->
  <g>
    <rect x="30" y="735" width="940" height="15" fill="#e0f2fe" stroke="#0284c7" stroke-width="2" rx="2"/>
  </g>
</svg>
